# Задание
1) Реализовать клиент-сервер схему "Простой параллелльный сервер"
2) Реализовать клиент-сервер схему "Параллелльный сервер с пулом"
3) Реализовать клиент-сервер схему "Потребитель-производитель"
4) Реализовать клиент-сервер схему мультипротокольного сервера (через epoll в одном потоке с двуся сокетами)

# Схемы

## Схема 1 (Простой параллельный сервер)
Процесс порождает 3 вида потоков:
- Слушающий поток
- Обслуживающий поток
- Поток-сборщик

### Списки
Для реализации возможности запускать несколько слушающих и обслуживающих потоков используются двусвязные списки. 
Всего есть два списка
- Список слушающих потоков
- Список обслуживающих потоков

Списки логически подразделяются на следующие виды 
- Список живых слушающих потоков
- Список мёртвых слушающих потоков
- Список живых обслуживающих потоков
- Список мёртвых обслуживающих потоков

### Слушающий поток
Принимает списки 
- Список живых слушающих потоков
- Список мёртвых слушающих потоков
- Список живых обслуживающих потоков
- Список мёртвых обслуживающих потоков

Поток сам добавляет и удаляет себя списоков живых и мёртвых слушающих потоков (Лучше так, потому что в узле содержится tid потока)

Создаёт сокет из переданного endpoint'a, биндится, постоянно ждёт соединения, при соединении создаёт обслуживающий сокет с тем же адресом и автоматически выбранным портом, передаёт клиенту новый endpoint, создаёт обслуживающий поток с этим endpoint'ом и снова начинает слушать.

### Обслуживающий поток
Принимает списки 
- Список живых слушающих потоков
- Список мёртвых слушающих потоков

Поток сам добавляет и удаляет себя списоков живых и мёртвых слушающих потоков (Лучше так, потому что в узле содержится tid потока)

Ждёт соединения от клиента. Отправляет текущее время и завершается.

### Поток-сборщик

Принимает массив указателей на списки 
- Список живых слушающих потоков
- Список мёртвых слушающих потоков
- Список живых обслуживающих потоков
- Список мёртвых обслуживающих потоков

Просыпается раз в секунду и забирает статусы мёртвых потоков, освобождает некоторые неосвобождённые ресурсы потоков.

### Завершение потоков
На сервере изменена переопределена диспозиция сигнала SIGUSR1 на пустую.
При принудительном заверщении живых слушающих и обслуживающих потоков происходит 2 действия
- Выставляется флаг завершения потока
- Потоку посылается сигнал SIGUSR1 для прерывания блокирующей функции (Завершение из-за прерывания обработано)
Поток заверщается

При принудительном заверщении потока-сборщика просто выставляется флаг завершения потока

### Замеки
- Для завершения сервера требуется ввести любой символ в stdin
- Подтверждения отправки данных перед закрытием сокета нет!!!!
- Утечек памяти нет
- Отслеживания выполенния на сервере нет

- Списки слушающих и обслуживающих потоков внутри между собой почти не связаны, однако, снаружи их можно логически связать и получить небольшую информацию о них
- Поток-сборжик может работать для нескольких списков одновременно, так что этот поток может быть всего один, или несколько.